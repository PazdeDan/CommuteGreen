<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Footprint</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <link rel="stylesheet" type="text/css" href="CSS/DEFAULT.CSS" id="themeStylesheet">
        <script type="text/javascript">
            function getCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i].replace(/^\s+|\s+$/g, "");
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                }
                return null;
            }
            function checkParentPage() {
                if (window.top.location.pathname.endsWith("MOBILE.HTM")) {
                    document.getElementById("themeStylesheet").setAttribute("href", "CSS/MOBILE.CSS");
                } else {
                    var darkModeEnabled = getCookie("darkMode") === "true";
                    var stylesheet = darkModeEnabled ? "CSS/ACCESS.CSS" : "CSS/DEFAULT.CSS";
                    document.getElementById("themeStylesheet").setAttribute("href", stylesheet);
                }
            }
        </script>
    </head>
    <body class="content">
        <div id="travelDataContainer"></div>
        <script type="text/javascript">
            function getTravelData() {
                var travelData = getCookie("travelData");
                return travelData ? JSON.parse(travelData) : [];
            }
            function displayTravelData() {
                var travelData = getTravelData();
                if (travelData.length === 0) {
                    document.getElementById("travelDataContainer").innerHTML = "<p>No travel data available.</p>";
                    return;
                }
                var table = "<table style='width: 100%; table-layout: fixed;'><tr style='background-color: grey; color: black;'><th style='padding: 10px; width: 14.29%;'>Origin</th><th style='padding: 10px; width: 14.29%;'>Destination</th><th style='padding: 10px; width: 14.29%;'>Mode</th><th style='padding: 10px; width: 14.29%;'>Distance</th><th style='padding: 10px; width: 14.29%;'>Duration</th><th style='padding: 10px; width: 14.29%;'>CO2 Emissions</th><th style='padding: 10px; width: 14.29%;'>Eco Score</th></tr>";
                for (var i = 0; i < travelData.length; i++) {
                    var ecoScoreColor = "rgb(" + (255 - travelData[i].ecoScore * 2.55) + ", " + travelData[i].ecoScore * 2.55 + ", 0)";
                    table += "<tr><td style='padding: 10px; width: 14.29%;'>" + travelData[i].startLocation + "</td><td style='padding: 10px; width: 14.29%;'>" + travelData[i].endLocation + "</td><td style='padding: 10px; width: 14.29%;'>" + travelData[i].mode + "</td><td style='padding: 10px; width: 14.29%;'>" + travelData[i].distance + " km" + "</td><td style='padding: 10px; width: 14.29%;'>" + travelData[i].duration + " min" + "</td><td style='padding: 10px; width: 14.29%;'>" + travelData[i].co2Emission + " kg" + "</td><td style='padding: 10px; width: 14.29%; background-color: " + ecoScoreColor + ";'>" + travelData[i].ecoScore + "</td></tr>";
                }
                table += "</table>";
                document.getElementById("travelDataContainer").innerHTML = table;
            }
            window.onload = function() {
                checkParentPage();
                displayTravelData();
            };
        </script>
    </body>
</html>